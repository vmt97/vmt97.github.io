window.__require=function e(t,n,i){function c(s,r){if(!n[s]){if(!t[s]){var a=s.split("/");if(a=a[a.length-1],!t[a]){var u="function"==typeof __require&&__require;if(!r&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+s+"'")}}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){return c(t[s][1][e]||e)},l,l.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<i.length;s++)c(i[s]);return c}({GameController:[function(e,t,n){"use strict";cc._RF.push(t,"129a7GDnFNIuqNsuUxe+d5A","GameController"),cc.Class({extends:cc.Component,properties:{listImage:{default:[],type:cc.SpriteFrame},square:{default:null,type:cc.Prefab},tmpSquare:{default:[],type:cc.Prefab},UIController:e("UIConTroller"),score:0},onLoad:function(){this.listSquare=[],this.squarePool=new cc.NodePool;for(var e=0;e<20;++e){var t=cc.instantiate(this.square);this.squarePool.put(t)}},initLevel:function(){var e=this;this.UIController.hidePlayButton();var t=2*this.listImage.length+1,n=0,i=cc.delayTime(.1),c=cc.callFunc(function(){t--,e.createSquare(t,n,e.listImage[n])},this),o=cc.callFunc(function(){t--,e.createSquare(t,n,e.listImage[n]),n++},this);this.node.runAction(cc.sequence(cc.repeat(cc.sequence(i,c,i,o),this.listImage.length),cc.delayTime(1),cc.callFunc(function(){e.setUpPositionSquares()})))},setUpPositionSquares:function(){for(var e=this.listSquare.length-1,t=0,n=0;n<4;n++)for(var i=0;i<5;i++){var c=64*i-128,o=100+64*-n,s=this.listSquare[e];cc.log("check pos: "+c+" : "+o);var r=0===c?0:c>0?c+50:c-50,a=o>0?o+50:o-50;s.emit("SHOW_INDEX");var u=cc.moveTo(.5,r,a).easing(cc.easeSineOut()),l=cc.moveTo(.5,c,o).easing(cc.easeSineOut()),h=cc.sequence(cc.delayTime(.1*t),u,l);s.runAction(h),e--,t++}},createSquare:function(e,t,n){var i=null;this.squarePool.size()>0?(cc.log("size pool: "+this.squarePool.size()),(i=this.squarePool.get()).emit("REUSE")):i=cc.instantiate(this.square),i.parent=this.node,i.on("ON_TYPE",this.onTouchCard,this),i.emit("INIT_INFO",e,t,n,this),i.setPosition(0,0,0),this.listSquare.push(i)},onTouchCard:function(e){if(!(this.tmpSquare.length>=2)){var t=e.getCurrentTarget(),n=e.getUserData().type;t.emit("TOUCH_SQUARE"),this.pushToTempSquares(t,n),e.stopPropagation()}},getTmpSquare:function(){return this.tmpSquare},setTmpSquare:function(e){this.tmpSquare=e},clearTmpSquare:function(){this.tmpSquare=[]},removeSquare:function(e){this.squarePool.put(e);var t=this.listSquare.indexOf(e);this.listSquare.splice(t,1),cc.log("size pool: "+this.squarePool.size())},pushToTempSquares:function(e,t){0===this.tmpSquare.length?(this.pushToTempList(e),this.tmpType=t):1===this.tmpSquare.length&&this.tmpSquare[0]!=e&&(this.pushToTempList(e),this.checkMatchSquare(t))},checkMatchSquare:function(e){var t=this;if(this.tmpSquare.length>=2&&-1!=this.tmpType){var n=this.tmpType,i=e,c=cc.sequence(cc.delayTime(1),cc.callFunc(function(){n!=i?(t.tmpSquare[0].emit("RESET_SQUARE"),t.tmpSquare[1].emit("RESET_SQUARE")):(t.tmpSquare[0].emit("MATCH_SQUARE"),t.tmpSquare[1].emit("MATCH_SQUARE"))}),cc.delayTime(1),cc.callFunc(function(){t.removeSquare(t.tmpSquare[0]),t.removeSquare(t.tmpSquare[1]),t.countScore(),t.checkWinGame(),t.clearTmpSquare(),t.tmpType=-1}));this.node.runAction(c)}},pushToTempList:function(e){this.tmpSquare.push(e)},checkWinGame:function(){this.listSquare.length<=0&&this.UIController.showVictory()},countScore:function(){var e=this,t=cc.delayTime(.1),n=cc.callFunc(function(){e.score+=1,e.setScore()},this);this.node.runAction(cc.repeat(cc.sequence(t,n),10))},setScore:function(){this.UIController.showScore(this.score)},playAgain:function(){this.UIController.hideUIplayAgain(),this.initLevel()}}),cc._RF.pop()},{UIConTroller:"UIConTroller"}],Square:[function(e,t,n){"use strict";var i;cc._RF.push(t,"bde07hH36lFD7NcI2WClEpB","Square"),i=cc.Enum({OPEN:0,CLOSE:1}),cc.Class({extends:cc.Component,properties:{index:0,type:0,GameController:e("GameController"),labelIndex:{default:null,type:cc.Label},labelType:{default:null,type:cc.Label},defaultSprite:{default:null,type:cc.SpriteFrame},spriteOpen:{default:null,type:cc.SpriteFrame},state:{default:i.CLOSE,type:i}},onLoad:function(){this.state=i.CLOSE,this.node.on("INIT_INFO",this.initInfor,this),this.node.on("REUSE",this.reuse,this),this.node.on("OPEN_SQUARE",this.openSquare,this),this.node.on("RESET_SQUARE",this.resetSquare,this),this.node.on("MATCH_SQUARE",this.matchSquare,this),this.node.on("TOUCH_SQUARE",this.touchSquare,this),this.node.on("GET_TYPE",this.squareType,this),this.node.on("SHOW_INDEX",this.showIndex,this);var e=cc.fadeIn(.1);this.node.runAction(e)},showIndex:function(){cc.log("index: "+this.index)},onClickSquare:function(){this.clickItemEvent=new cc.Event.EventCustom("ON_TYPE",!0),this.clickItemEvent.setUserData({type:this.type}),this.node.dispatchEvent(this.clickItemEvent)},squareType:function(e){cc.log("type: "+this.type)},initInfor:function(e,t,n,i){this.index=e,this.type=t,this.spriteOpen=n,this.GameController=i,this.labelIndex.string=e,this.labelType.string=t},touchSquare:function(){this.state===i.CLOSE&&this.openSquare()},openSquare:function(){var e=this;this.state=i.OPEN;var t=cc.scaleTo(.3,0,1),n=cc.scaleTo(.3,1,1),c=cc.sequence(t,cc.callFunc(function(){e.labelIndex.node.active=!1,e.node.getComponent(cc.Sprite).spriteFrame=e.spriteOpen}),n);this.node.runAction(c)},resetSquare:function(){var e=this;this.state=i.CLOSE;var t=cc.scaleTo(.3,0,1),n=cc.scaleTo(.3,1,1),c=cc.sequence(t,cc.callFunc(function(){e.labelIndex.node.active=!0,e.node.getComponent(cc.Sprite).spriteFrame=e.defaultSprite}),n);this.node.runAction(c)},matchSquare:function(){this.node.zIndex=1;var e=cc.scaleTo(.5,2,2);this.node.runAction(e)},getType:function(){return this.type},getIndex:function(){return this.index},unuse:function(){},reuse:function(){cc.log("reuseeeeeeee"),this.node.scaleX=1,this.node.scaleY=1,this.state=i.CLOSE,this.labelIndex.node.active=!0,this.node.getComponent(cc.Sprite).spriteFrame=this.defaultSprite}}),cc._RF.pop()},{GameController:"GameController"}],UIConTroller:[function(e,t,n){"use strict";cc._RF.push(t,"c270asPQH5PbLUFII3NfggR","UIConTroller"),cc.Class({extends:cc.Component,properties:{victoryPopup:{default:null,type:cc.Node},scoreLabel:{default:null,type:cc.Label},playButton:{default:null,type:cc.Button}},onLoad:function(){},showScore:function(e){this.scoreLabel.string="Score: "+e},showVictory:function(){this.victoryPopup.active=!0},hidePlayButton:function(){cc.log("hide btn"),this.playButton.node.active=!1},backVictory:function(){this.playButton.node.active=!0,this.victoryPopup.active=!1},hideUIplayAgain:function(){this.hidePlayButton(),this.victoryPopup.active=!1}}),cc._RF.pop()},{}]},{},["GameController","Square","UIConTroller"]);