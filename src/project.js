window.__require=function e(t,n,c){function i(a,o){if(!n[a]){if(!t[a]){var s=a.split("/");if(s=s[s.length-1],!t[s]){var u="function"==typeof __require&&__require;if(!o&&u)return u(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){return i(t[a][1][e]||e)},l,l.exports,e,t,n,c)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<c.length;a++)i(c[a]);return i}({GameController:[function(e,t,n){"use strict";cc._RF.push(t,"129a7GDnFNIuqNsuUxe+d5A","GameController");var c=cc.Class({extends:cc.Component,properties:{listImage:{default:[],type:cc.SpriteFrame},square:{default:null,type:cc.Prefab},listSquare:{default:[],type:cc.Prefab},tmpSquare:{default:[],type:cc.Prefab},UIController:e("UIConTroller"),score:0,canPlay:!0},statics:{instance:null},onLoad:function(){c.instance=this,this.score=0},initLevel:function(){var e=this;this.UIController.hidePlayButton();var t=2*this.listImage.length+1,n=0,c=cc.delayTime(.1),i=cc.callFunc(function(){t--,e.createSquare(t,n,e.listImage[n])},this),r=cc.callFunc(function(){t--,e.createSquare(t,n,e.listImage[n]),n++},this);this.node.runAction(cc.sequence(cc.repeat(cc.sequence(c,i,r),this.listImage.length),cc.delayTime(1),cc.callFunc(function(){e.setUpPositionSquares()})))},setUpPositionSquares:function(){for(var e=this.listSquare.length-1,t=0,n=0;n<4;n++)for(var c=0;c<5;c++){var i=64*c-130,r=150+64*-n,a=this.listSquare[e],o=cc.moveTo(1,i,r).easing(cc.easeBackInOut()),s=cc.sequence(cc.delayTime(.1*t),o);a.runAction(s),e--,t++}},createSquare:function(e,t,n){var c=cc.instantiate(this.square);c.parent=this.node,c.emit("INIT_INFO",e,t,n),c.setPosition(0,-130,0);var i=cc.fadeIn(.1);c.runAction(i),this.listSquare.push(c)},radomInteger:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)},randomElementInArray:function(e){return e[radomInteger(0,e.length-1)]},getTmpSquare:function(){return this.tmpSquare},setTmpSquare:function(e){this.tmpSquare=e},clearTmpSquare:function(){this.tmpSquare=[]},removeSquare:function(e){var t=this.listSquare.indexOf(e);this.listSquare.splice(t,1),this.setCanPlay(!0)},pushToTempSquares:function(e){0!==this.tmpSquare.length?1===this.tmpSquare.length&&this.tmpSquare[0]!=e&&(this.pushToTempList(e),this.checkMatchSquare()):this.pushToTempList(e)},checkMatchSquare:function(){var e=this;if(!(this.tmpSquare.length<2)){var t=this.tmpSquare[0].getType(),n=this.tmpSquare[1].getType(),c=cc.sequence(cc.delayTime(1),cc.callFunc(function(){t!=n?(e.tmpSquare[0].resetSquare(),e.tmpSquare[1].resetSquare()):(e.tmpSquare[0].matchSquare(),e.tmpSquare[1].matchSquare(),e.countScore(),e.checkWinGame())}),cc.delayTime(.5),cc.callFunc(function(){e.clearTmpSquare()}));this.node.runAction(c)}},pushToTempList:function(e){this.tmpSquare.push(e)},checkWinGame:function(){this.listSquare.length>0||this.UIController.showVictory()},countScore:function(){var e=this,t=cc.delayTime(.1),n=cc.callFunc(function(){e.score+=1,e.setScore()},this);this.node.runAction(cc.repeat(cc.sequence(t,n),10))},setScore:function(){this.UIController.showScore(this.score)},playAgain:function(){this.UIController.hideUIplayAgain(),this.initLevel()},setCanPlay:function(e){this.canPlay=e},isCanPlay:function(){return this.canPlay}});cc._RF.pop()},{UIConTroller:"UIConTroller"}],Square:[function(e,t,n){"use strict";cc._RF.push(t,"bde07hH36lFD7NcI2WClEpB","Square");var c,i=e("GameController");c=cc.Enum({OPEN:0,CLOSE:1}),cc.Class({extends:cc.Component,properties:{index:0,type:0,labelIndex:{default:null,type:cc.Label},labelType:{default:null,type:cc.Label},defaultSprite:{default:null,type:cc.SpriteFrame},spriteOpen:{default:null,type:cc.SpriteFrame},state:{default:c.CLOSE,type:c}},onLoad:function(){this.state=c.CLOSE,this.node.on("INIT_INFO",this.initInfor,this),this.node.on("OPEN_SQUARE",this.openSquare,this),this.node.on("RESET_SQUARE",this.resetSquare,this),this.node.on("MATCH_SQUARE",this.matchSquare,this),this.node.on(cc.Node.EventType.TOUCH_START,this.tounchSquare,this)},initInfor:function(e,t,n){this.index=e,this.type=t,this.spriteOpen=n,this.labelIndex.string=e,this.labelType.string=t},tounchSquare:function(){i.instance.getTmpSquare().length>=2||(this.state===c.CLOSE&&this.openSquare(),i.instance.pushToTempSquares(this))},openSquare:function(){var e=this;this.state=c.OPEN;var t=cc.scaleTo(.3,0,1),n=cc.scaleTo(.3,1,1),i=cc.sequence(t,cc.callFunc(function(){e.node.getComponent(cc.Sprite).spriteFrame=e.spriteOpen}),n);this.node.runAction(i)},resetSquare:function(){var e=this;this.state=c.CLOSE;var t=cc.scaleTo(.3,0,1),n=cc.scaleTo(.3,1,1),i=cc.sequence(t,cc.callFunc(function(){e.node.getComponent(cc.Sprite).spriteFrame=e.defaultSprite}),n);this.node.runAction(i)},matchSquare:function(){var e=this;this.node.zIndex=1;var t=cc.scaleTo(.3,2,2),n=cc.sequence(t,cc.callFunc(function(){e.node.removeFromParent(!0),i.instance.clearTmpSquare(),i.instance.checkWinGame(),i.instance.setCanPlay(!0)}));this.node.runAction(n),i.instance.removeSquare(this)},getType:function(){return this.type},getIndex:function(){return this.index}}),cc._RF.pop()},{GameController:"GameController"}],UIConTroller:[function(e,t,n){"use strict";cc._RF.push(t,"c270asPQH5PbLUFII3NfggR","UIConTroller"),cc.Class({extends:cc.Component,properties:{victoryPopup:{default:null,type:cc.Node},scoreLabel:{default:null,type:cc.Label},playButton:{default:null,type:cc.Button}},onLoad:function(){},showScore:function(e){this.scoreLabel.string="Score: "+e},showVictory:function(){this.victoryPopup.active=!0},hidePlayButton:function(){cc.log("hide btn"),this.playButton.node.active=!1},backVictory:function(){this.playButton.node.active=!0,this.victoryPopup.active=!1},hideUIplayAgain:function(){this.hidePlayButton(),this.victoryPopup.active=!1}}),cc._RF.pop()},{}]},{},["GameController","Square","UIConTroller"]);